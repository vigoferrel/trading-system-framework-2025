const { LLMNeuralOrchestrator } = require('./llm-neural-orchestrator');

async function testLLMCompleto() {
    console.log('ğŸ§ª PRUEBA COMPLETA DEL LLM NEURAL ORCHESTRATOR');
    console.log('='.repeat(60));
    
    try {
        // 1. Crear instancia del orquestador
        console.log('\n1ï¸âƒ£ Creando instancia del LLM Neural Orchestrator...');
        const orchestrator = new LLMNeuralOrchestrator();
        
        // 2. Inicializar sistemas neuronales
        console.log('\n2ï¸âƒ£ Inicializando sistemas neuronales...');
        await orchestrator.initializeNeuralSystems();
        
        // 3. Generar decisiÃ³n unificada
        console.log('\n3ï¸âƒ£ Generando decisiÃ³n unificada...');
        const decision = await orchestrator.generateUnifiedDecision('BTCUSDT');
        
        // 4. Mostrar resultados
        console.log('\n4ï¸âƒ£ RESULTADOS:');
        console.log('âœ… DecisiÃ³n:', decision.final_decision);
        console.log('âœ… Confianza:', decision.confidence);
        console.log('âœ… Razonamiento:', decision.reasoning);
        console.log('âœ… LLM Validado:', decision.llm_validated);
        console.log('âœ… Risk Level:', decision.risk_level);
        console.log('âœ… Timeframe:', decision.timeframe);
        
        if (decision.key_factors && decision.key_factors.length > 0) {
            console.log('âœ… Factores Clave:', decision.key_factors.join(', '));
        }
        
        if (decision.contradictions_resolved) {
            console.log('âœ… Contradicciones Resueltas:', decision.contradictions_resolved);
        }
        
        // 5. Mostrar estadÃ­sticas
        console.log('\n5ï¸âƒ£ ESTADÃSTICAS DEL SISTEMA:');
        const stats = orchestrator.getSystemStats();
        console.log('ğŸ“Š Total Decisiones:', stats.totalDecisions);
        console.log('ğŸ“Š Llamadas LLM:', stats.llmCalls);
        console.log('ğŸ“Š Cache Hits:', stats.cacheHits);
        console.log('ğŸ“Š Errores:', stats.errors);
        
        console.log('\n' + '='.repeat(60));
        console.log('ğŸ¯ PRUEBA COMPLETADA EXITOSAMENTE');
        
        if (decision.llm_validated) {
            console.log('âœ… SISTEMA FUNCIONANDO SIN FALLBACK');
        } else {
            console.log('âŒ SISTEMA EN MODO FALLBACK');
        }
        
    } catch (error) {
        console.error('\nâŒ ERROR EN LA PRUEBA:');
        console.error('Error:', error.message);
        console.error('Stack:', error.stack);
    }
}

testLLMCompleto();
