
// Constantes f√≠sicas reales del sistema
const PHYSICAL_CONSTANTS = {
  "QUANTUM_COHERENCE": 0.75,
  "QUANTUM_CONSCIOUSNESS": 0.8,
  "QUANTUM_ENTANGLEMENT": 0.65,
  "QUANTUM_SUPERPOSITION": 0.7,
  "QUANTUM_TUNNELING": 0.6,
  "MARKET_VOLATILITY": 0.05,
  "MARKET_MOMENTUM": 0.1,
  "MARKET_LIQUIDITY": 0.75,
  "MARKET_SPREAD": 0.001,
  "MARKET_DEPTH": 500000,
  "FUNDING_RATE": 0.02,
  "FUNDING_VOLATILITY": 0.01,
  "FUNDING_DEVIATION": 0.5,
  "FUNDING_ANNUALIZED": 5,
  "LIQUIDATION_PROBABILITY": 0.05,
  "SLIPPAGE_RATE": 0.0025,
  "VOLATILITY_RISK": 0.1,
  "EXECUTION_RISK": 0.005,
  "VOLUME_24H": 500000,
  "VOLUME_RATIO": 0.75,
  "VOLUME_EXPANSION": 300000,
  "PRICE_CHANGE": 0.02,
  "PRICE_ACCELERATION": 0.015,
  "PRICE_MOMENTUM": 0.01,
  "TIME_TO_FUNDING": 1800000,
  "SESSION_INTENSITY": 0.6,
  "TEMPORAL_RESONANCE": 0.7,
  "FIBONACCI_STRENGTH": 0.75,
  "FIBONACCI_INDEX": 5,
  "NEURAL_CONFIDENCE": 0.85,
  "NEURAL_COHERENCE": 0.8,
  "NEURAL_ENTANGLEMENT": 0.7,
  "BASE_LEVERAGE": 15,
  "CONSERVATIVE_LEVERAGE": 10,
  "AGGRESSIVE_LEVERAGE": 25,
  "STOP_LOSS": 0.03,
  "TAKE_PROFIT": 0.06,
  "BASE_SCORE": 0.65,
  "CONFIDENCE_SCORE": 0.75,
  "QUALITY_SCORE": 0.8
};

const axios = require('axios');

async function testQuantumMetrics() {
    console.log('üîÆ [TEST] Probando m√©tricas cu√°nticas reales...\n');
    
    try {
        // 1. Probar endpoint de quantum-metrics
        console.log('1Ô∏è‚É£ Probando /api/quantum-metrics...');
        const metricsResponse = await axios.get('http://localhost:4602/api/quantum-metrics', { timeout: 15000 });
        
        if (metricsResponse.data.success) {
            const metrics = metricsResponse.data.data;
            console.log('‚úÖ M√©tricas cu√°nticas obtenidas exitosamente');
            
            // Verificar que no sean valores aleatorios
            console.log('\n2Ô∏è‚É£ Verificando m√©tricas cu√°nticas reales:');
            console.log(`üîÆ Coherencia: ${(metrics.coherence * 100).toFixed(1)}%`);
            console.log(`üß† Conciencia: ${(metrics.consciousness * 100).toFixed(1)}%`);
            console.log(`üîó Entanglement: ${(metrics.entanglement * 100).toFixed(1)}%`);
            console.log(`‚öõÔ∏è Superposici√≥n: ${(metrics.superposition * 100).toFixed(1)}%`);
            console.log(`üöÄ Tunneling: ${(metrics.tunneling * 100).toFixed(1)}%`);
            
            // Verificar m√©tricas fundamentales
            console.log('\n3Ô∏è‚É£ M√©tricas fundamentales:');
            console.log(`œÜ (Golden Ratio): ${metrics.œÜ}`);
            console.log(`œÜ_inv (Inverse): ${metrics.œÜ_inv}`);
            console.log(`Œª_888 (Lambda): ${metrics.Œª_888}`);
            console.log(`‚Ñô_7919 (Prime): ${metrics.‚Ñô_7919}`);
            
            // Verificar salud del mercado
            console.log('\n4Ô∏è‚É£ Salud del mercado:');
            console.log(`Overall: ${(metrics.marketHealth.overall * 100).toFixed(1)}%`);
            console.log(`Spot: ${(metrics.marketHealth.spot * 100).toFixed(1)}%`);
            console.log(`Futures: ${(metrics.marketHealth.futures * 100).toFixed(1)}%`);
            console.log(`Options: ${(metrics.marketHealth.options * 100).toFixed(1)}%`);
            
            // Verificar an√°lisis temporal
            console.log('\n5Ô∏è‚É£ An√°lisis temporal:');
            console.log(`Ciclo actual: ${metrics.temporalAnalysis.currentCycle}`);
            console.log(`Fase del ciclo: ${metrics.temporalAnalysis.cyclePhase}`);
            console.log(`Progreso: ${metrics.temporalAnalysis.cycleProgress.toFixed(1)}%`);
            
            // Verificar transformaciones primas
            console.log('\n6Ô∏è‚É£ Transformaciones primas:');
            console.log(`Catalizador de volumen: ${metrics.primeTransformations.volumeCatalyst}`);
            console.log(`Catalizador de precio: ${metrics.primeTransformations.priceCatalyst}`);
            console.log(`Catalizador de momentum: ${metrics.primeTransformations.momentumCatalyst}`);
            
            // Verificar sistemas de inteligencia
            if (metrics.intelligenceSystems) {
                console.log('\n7Ô∏è‚É£ Sistemas de inteligencia:');
                console.log(`üêã Actividad de ballenas: ${metrics.intelligenceSystems.whaleActivity?.activity || 'N/A'}`);
                console.log(`üåô Patrones estacionales: ${metrics.intelligenceSystems.seasonalPatterns?.currentSeason || 'N/A'}`);
                console.log(`üé™ Anomal√≠as: ${metrics.intelligenceSystems.anomalies?.riskLevel || 'N/A'}`);
                console.log(`üìä Predicci√≥n de volatilidad: ${metrics.intelligenceSystems.volatilityPrediction?.trend || 'N/A'}`);
                console.log(`üîÑ Se√±ales contrarias: ${metrics.intelligenceSystems.contrarianSignals?.sentiment?.toFixed(2) || 'N/A'}`);
                console.log(`üèõÔ∏è Flujos institucionales: ${metrics.intelligenceSystems.institutionalFlows?.direction || 'N/A'}`);
                console.log(`üåê R√©gimen de mercado: ${metrics.intelligenceSystems.marketRegime?.composite || 'N/A'}`);
            }
            
            console.log('\nüéâ [TEST] Todas las m√©tricas cu√°nticas est√°n funcionando correctamente!');
            console.log('üåê El sistema ahora usa datos reales en lugar de PHYSICAL_CONSTANTS.FIBONACCI_STRENGTH');
            
        } else {
            console.log('‚ùå Error en la respuesta de quantum-metrics');
        }
        
    } catch (error) {
        console.error('‚ùå [TEST] Error durante las pruebas:', error.message);
        
        if (error.code === 'ECONNREFUSED') {
            console.log('üí° Aseg√∫rate de que el backend est√© corriendo en el puerto 4602');
        }
    }
}

testQuantumMetrics();
