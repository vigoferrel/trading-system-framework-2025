
// Constantes f√≠sicas reales del sistema
const PHYSICAL_CONSTANTS = {
  "QUANTUM_COHERENCE": 0.75,
  "QUANTUM_CONSCIOUSNESS": 0.8,
  "QUANTUM_ENTANGLEMENT": 0.65,
  "QUANTUM_SUPERPOSITION": 0.7,
  "QUANTUM_TUNNELING": 0.6,
  "MARKET_VOLATILITY": 0.05,
  "MARKET_MOMENTUM": 0.1,
  "MARKET_LIQUIDITY": 0.75,
  "MARKET_SPREAD": 0.001,
  "MARKET_DEPTH": 500000,
  "FUNDING_RATE": 0.02,
  "FUNDING_VOLATILITY": 0.01,
  "FUNDING_DEVIATION": 0.5,
  "FUNDING_ANNUALIZED": 5,
  "LIQUIDATION_PROBABILITY": 0.05,
  "SLIPPAGE_RATE": 0.0025,
  "VOLATILITY_RISK": 0.1,
  "EXECUTION_RISK": 0.005,
  "VOLUME_24H": 500000,
  "VOLUME_RATIO": 0.75,
  "VOLUME_EXPANSION": 300000,
  "PRICE_CHANGE": 0.02,
  "PRICE_ACCELERATION": 0.015,
  "PRICE_MOMENTUM": 0.01,
  "TIME_TO_FUNDING": 1800000,
  "SESSION_INTENSITY": 0.6,
  "TEMPORAL_RESONANCE": 0.7,
  "FIBONACCI_STRENGTH": 0.75,
  "FIBONACCI_INDEX": 5,
  "NEURAL_CONFIDENCE": 0.85,
  "NEURAL_COHERENCE": 0.8,
  "NEURAL_ENTANGLEMENT": 0.7,
  "BASE_LEVERAGE": 15,
  "CONSERVATIVE_LEVERAGE": 10,
  "AGGRESSIVE_LEVERAGE": 25,
  "STOP_LOSS": 0.03,
  "TAKE_PROFIT": 0.06,
  "BASE_SCORE": 0.65,
  "CONFIDENCE_SCORE": 0.75,
  "QUALITY_SCORE": 0.8
};

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîÆ Quantum Trading Dashboard - Profesional</title>
    
    <!-- Meta tags -->
    <meta name="description" content="Sistema de trading cu√°ntico profesional con an√°lisis ML en tiempo real">
    <meta name="theme-color" content="#40e0d0">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-atom"></i>
                    <h1>üîÆ Quantum Trading Dashboard</h1>
                    <div class="quantum-links">
                        <a href="quantum-dashboard.html" class="quantum-btn">üåô Lado Oscuro</a>
                        <a href="index.html" class="quantum-btn active">üìä Principal</a>
                    </div>
                </div>
                <div class="header-info">
                    <div class="connection-status" id="connectionStatus">
                        <i class="fas fa-circle"></i>
                        <span>Conectando...</span>
                    </div>
                    <div class="last-update" id="lastUpdate">
                        <i class="fas fa-clock"></i>
                        <span>--:--:--</span>
                    </div>
                    <div class="kpi-badge" title="Uptime" id="kpiUptime">
                        <i class="fas fa-hourglass-half"></i>
                        <span>Uptime: --</span>
                    </div>
                                         <div class="kpi-badge" title="Salud del sistema" id="kpiHealth">
                         <i class="fas fa-heartbeat"></i>
                         <span>Salud: --</span>
                     </div>
                     <div class="kpi-badge" title="Modo de trading" id="tradeModeBadge">
                         <i class="fas fa-cog"></i>
                         <span>Modo: --</span>
                     </div>
                     <button class="btn btn-secondary" id="toggleExpert" title="Modo Experto">Experto</button>
                </div>
            </div>
        </header>

        <!-- Tabs Navigation -->
        <nav class="tabs" role="tablist">
            <button class="tab active" data-target="operar" role="tab">Operar</button>
            <button class="tab" data-target="monitorear" role="tab">Monitorear</button>
            <button class="tab" data-target="configurar" role="tab">Configurar</button>
                         <div class="quick-actions">
                 <button class="btn" id="qaSignals" title="Actualizar se√±ales"><i class="fas fa-sync-alt"></i> Se√±ales</button>
                 <button class="btn" id="qaMatrix" title="Actualizar matriz"><i class="fas fa-th"></i> Matriz</button>
                 <button class="btn" id="qaAutoStart" title="Auto Start"><i class="fas fa-play"></i> Auto</button>
                 <button class="btn" id="qaKill" title="Kill Switch"><i class="fas fa-stop"></i> Kill</button>
                 <button class="btn btn-primary" id="qaMaxProfit" title="Maximizar Profit"><i class="fas fa-rocket"></i> Max Profit</button>
             </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content" id="main">
            
            <!-- Dashboard Summary -->
            <section class="dashboard-summary" data-group="operar">
                <div class="summary-card">
                    <div class="summary-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="summary-content">
                        <h3>üìà Estado del Mercado</h3>
                        <p class="summary-value" id="marketStatus">--</p>
                        <small>Tendencia general basada en 6 activos</small>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="summary-content">
                        <h3>üîÆ Puntuaci√≥n Cu√°ntica</h3>
                        <p class="summary-value" id="quantumScore">--</p>
                        <small>Promedio de an√°lisis cu√°ntico (0-1)</small>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon">
                        <i class="fas fa-signal"></i>
                    </div>
                    <div class="summary-content">
                        <h3>üì° Se√±ales Activas</h3>
                        <p class="summary-value" id="activeSignals">--</p>
                        <small>Oportunidades de trading detectadas</small>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon">
                        <i class="fas fa-coins"></i>
                    </div>
                    <div class="summary-content">
                        <h3>üí∞ Profit Real</h3>
                        <p class="summary-value" id="dailyProfit">--</p>
                        <small>Profit real diario</small>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon">
                        <i class="fas fa-compass"></i>
                    </div>
                    <div class="summary-content">
                        <h3>üß≠ Sentimiento</h3>
                        <p class="summary-value" id="marketSentiment">--</p>
                        <small>Agregado por se√±ales</small>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="summary-content">
                        <h3>üõ°Ô∏è Riesgo Neto</h3>
                        <p class="summary-value" id="netRisk">--</p>
                        <small>VaR / CVaR (99%)</small>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-icon">
                        <i class="fas fa-database"></i>
                    </div>
                    <div class="summary-content">
                        <h3>üîó Estado Core</h3>
                        <p class="summary-value" id="coreStatus">--</p>
                        <small>Conectividad con sistema real</small>
                    </div>
                </div>
            </section>

            <!-- ML System Section (Consolidada) -->
            <section class="ml-system" role="region" aria-labelledby="mlSystemTitle" data-group="operar">
                <h2 id="mlSystemTitle"><i class="fas fa-brain"></i> üß† Sistema ML al M√°ximo Potencial</h2>
                <p style="margin-bottom: 1.5rem; opacity: 0.8;">
                    <i class="fas fa-robot"></i> 
                    <strong>Estado del ML:</strong> Conectado directamente con enhanced-ml-strategic-system.js. 
                    Todos los modelos ML activos al m√°ximo rendimiento.
                </p>
                
                <!-- Estado Cu√°ntico ML -->
                <div class="guide-card" style="margin-bottom: 1rem;">
                    <h3>‚öõÔ∏è Estado Cu√°ntico ML</h3>
                    <div class="quantum-state-grid">
                        <div class="quantum-state-card">
                            <h4>Coherencia</h4>
                            <p class="quantum-value" id="coherenceValue">--%</p>
                            <small>Estabilidad del sistema</small>
                        </div>
                        <div class="quantum-state-card">
                            <h4>Conciencia</h4>
                            <p class="quantum-value" id="consciousnessValue">--%</p>
                            <small>Nivel de procesamiento IA</small>
                        </div>
                        <div class="quantum-state-card">
                            <h4>Entrelazamiento</h4>
                            <p class="quantum-value" id="entanglementValue">--%</p>
                            <small>Conectividad cu√°ntica</small>
                        </div>
                        <div class="quantum-state-card">
                            <h4>Superposici√≥n</h4>
                            <p class="quantum-value" id="superpositionValue">--%</p>
                            <small>Estado cu√°ntico</small>
                        </div>
                        <div class="quantum-state-card">
                            <h4>T√∫nel Cu√°ntico</h4>
                            <p class="quantum-value" id="tunnelingValue">--%</p>
                            <small>Probabilidad de t√∫nel</small>
                        </div>
                        <div class="quantum-state-card">
                            <h4>Leverage √ìptimo</h4>
                            <p class="quantum-value" id="optimalLeverageValue">--x</p>
                            <small>Leverage recomendado</small>
                        </div>
                    </div>
                </div>

                <!-- Oportunidades ML -->
                <div class="guide-card" style="margin-bottom: 1rem;">
                    <h3>üéØ Oportunidades ML Detectadas</h3>
                    <div style="display:flex; gap:8px; margin-bottom:10px;">
                        <button class="btn btn-primary" onclick="window.mlDashboard?.runMLAnalysis()">
                            <i class="fas fa-sync-alt"></i> Ejecutar An√°lisis ML
                        </button>
                        <span id="mlStatus" style="font-size:0.9rem; opacity:0.9;">Estado: Conectando...</span>
                    </div>
                    <div id="mlOpportunitiesContainer" class="opportunities-grid">
                        <!-- Oportunidades se cargan aqu√≠ -->
                    </div>
                </div>

                <!-- Predicciones ML -->
                <div class="guide-card">
                    <h3>üîÆ Predicciones ML en Tiempo Real</h3>
                    <div id="mlPredictionsContainer" class="predictions-grid">
                        <!-- Predicciones se cargan aqu√≠ -->
                    </div>
                </div>
            </section>

            <!-- Unified Trading Section -->
            <section class="unified" id="unifiedSection" data-group="operar">
                <h2><i class="fas fa-link"></i> üîó Trading Unificado (Opciones + Futuros)</h2>
                <div class="guide-card" style="margin-bottom: 1rem;">
                    <div class="kpi-row">
                        <div class="kpi-card"><span class="chip">PnL Opciones</span> <strong id="unifiedKpiOptions">-</strong></div>
                        <div class="kpi-card"><span class="chip">PnL Futuros</span> <strong id="unifiedKpiFutures">-</strong></div>
                        <div class="kpi-card"><span class="chip">PnL Total</span> <strong id="unifiedKpiTotal">-</strong></div>
                    </div>
                </div>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                         <div class="guide-card" style="min-width:320px;">
                         <h3>üìò Opciones</h3>
                         <table class="table" style="width:100%; font-size:0.9rem;">
                             <thead>
                                 <tr>
                                     <th>S√≠mbolo</th>
                                     <th>Side/Tipo</th>
                                     <th>Cant</th>
                                     <th>Entrada</th>
                                     <th>Mark</th>
                                     <th>PnL</th>
                                 </tr>
                             </thead>
                             <tbody id="unifiedOptionsBody"></tbody>
                         </table>
                     </div>
                     <div class="guide-card" style="min-width:320px;">
                         <h3>üìò Posiciones Opciones</h3>
                         <table class="table" style="width:100%; font-size:0.9rem;">
                             <thead>
                                 <tr>
                                     <th>S√≠mbolo</th>
                                     <th>Side/Tipo</th>
                                     <th>Cant</th>
                                     <th>Entrada</th>
                                     <th>Mark</th>
                                     <th>PnL</th>
                                 </tr>
                             </thead>
                             <tbody id="optionsPositionsBody"></tbody>
                         </table>
                     </div>
                                         <div class="guide-card" style="min-width:320px;">
                         <h3>üìó Futuros</h3>
                         <table class="table" style="width:100%; font-size:0.9rem;">
                             <thead>
                                 <tr>
                                     <th>ID</th>
                                     <th>S√≠mbolo</th>
                                     <th>Side</th>
                                     <th>Size</th>
                                     <th>Entrada</th>
                                     <th>Mark</th>
                                     <th>PnL</th>
                                 </tr>
                             </thead>
                             <tbody id="unifiedFuturesBody"></tbody>
                         </table>
                     </div>
                     <div class="guide-card" style="min-width:320px;">
                         <h3>üìó Posiciones Futuros</h3>
                         <table class="table" style="width:100%; font-size:0.9rem;">
                             <thead>
                                 <tr>
                                     <th>ID</th>
                                     <th>S√≠mbolo</th>
                                     <th>Side</th>
                                     <th>Size</th>
                                     <th>Entrada</th>
                                     <th>Mark</th>
                                     <th>PnL</th>
                                 </tr>
                             </thead>
                             <tbody id="futuresPositionsBody"></tbody>
                         </table>
                     </div>
                </div>
                <div class="guide-card" style="margin-top:1rem;">
                    <h3>üß∞ Ejecutar Cesta (Unified)</h3>
                    <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin-bottom:6px;">
                        <label>Tipo
                            <select id="uLegType" style="width:120px;">
                                <option value="options">options</option>
                                <option value="futures">futures</option>
                            </select>
                        </label>
                        <label>S√≠mbolo <input id="uLegSymbol" style="width:140px;" placeholder="BTC / BTCUSDT" /></label>
                        <label>Side
                            <select id="uLegSide" style="width:100px;">
                                <option value="BUY">BUY</option>
                                <option value="SELL">SELL</option>
                            </select>
                        </label>
                        <label>Cantidad <input id="uLegSize" type="number" min="1" step="1" style="width:90px;" value="1" /></label>
                        <button class="btn" id="uAddLegBtn" type="button"><i class="fas fa-plus"></i> A√±adir</button>
                        <button class="btn btn-primary" id="uExecBtn" type="button"><i class="fas fa-play"></i> Ejecutar Cesta</button>
                        <button class="btn" id="uSuggestBtn" type="button"><i class="fas fa-magic"></i> Sugerir Cesta</button>
                        <span id="uExecStatus" style="font-size:0.9rem; opacity:0.9;"></span>
                    </div>
                    <table class="table" style="width:100%; font-size:0.9rem;">
                        <thead>
                            <tr>
                                <th>Tipo</th>
                                <th>S√≠mbolo</th>
                                <th>Side</th>
                                <th>Size</th>
                                <th>Acci√≥n</th>
                            </tr>
                        </thead>
                        <tbody id="uLegsBody"></tbody>
                    </table>
                </div>
            </section>

            <!-- Trading Signals Section -->
            <section class="trading-signals" data-group="operar">
                <h2><i class="fas fa-bell"></i> üö® Se√±ales de Trading Cu√°ntico</h2>
                <p style="margin-bottom: 1.5rem; opacity: 0.8;">
                    <i class="fas fa-lightbulb"></i> 
                    <strong>Interpretaci√≥n:</strong> Las se√±ales se generan usando algoritmos cu√°nticos. 
                    <span style="color: #4caf50;">NEUTRAL</span> indica estrategias de opciones, 
                    <span style="color: #f44336;">SELL</span> sugiere posiciones cortas, 
                    <span style="color: #4caf50;">BUY</span> posiciones largas. 
                    La confianza >70% indica se√±ales de alta calidad.
                </p>
                <div class="signals-container">
                    <div class="signals-controls">
                        <button class="btn btn-primary" onclick="refreshSignals()" type="button">
                            <i class="fas fa-sync-alt"></i> Actualizar Se√±ales
                        </button>
                        <label>Ordenar por
                            <select id="signalsSortBy" style="width:160px;">
                                <option value="strength">Fuerza (|score-0.5|)</option>
                                <option value="confidence">Confianza</option>
                                <option value="symbol">S√≠mbolo</option>
                                <option value="time">Tiempo</option>
                            </select>
                        </label>
                        <div class="signal-filters">
                            <label>
                                <input type="checkbox" id="filterBuy" checked> 
                                <span style="color: #4caf50;">üìà Compra</span>
                            </label>
                            <label>
                                <input type="checkbox" id="filterSell" checked> 
                                <span style="color: #f44336;">üìâ Venta</span>
                            </label>
                            <label>
                                <input type="checkbox" id="filterHold" checked> 
                                <span style="color: #ffc107;">‚öñÔ∏è Neutral</span>
                            </label>
                            <label title="Umbral m√≠nimo de confianza">
                                Min Conf % <input id="filterMinConf" type="number" min="0" max="100" value="0" style="width:70px;" />
                            </label>
                        </div>
                    </div>
                                         <div class="signals-list" id="signalsList">
                         <!-- Signals will be populated here -->
                     </div>
                     <div id="alertsContainer" style="margin-top: 1rem;">
                         <!-- Alerts will be populated here -->
                     </div>
                     <div id="projectionsContainer" style="margin-top: 1rem;">
                         <!-- Projections will be populated here -->
                     </div>
                </div>
            </section>

            <!-- Market Data Section -->
            <section class="market-data" data-group="monitorear">
                <h2><i class="fas fa-chart-bar"></i> üìä Datos de Mercado en Tiempo Real</h2>
                <p style="margin-bottom: 1.5rem; opacity: 0.8;">
                    <i class="fas fa-info-circle"></i> 
                    <strong>Para el operador:</strong> Estos datos se actualizan cada 30 segundos desde Binance. 
                    Los precios incluyen an√°lisis de volatilidad y recomendaciones autom√°ticas.
                </p>
                <div class="market-grid" id="marketGrid">
                    <!-- Market data will be populated here -->
                </div>
            </section>

            <!-- Quantum Matrix Section -->
            <section class="quantum-matrix" role="region" aria-labelledby="matrixTitle" data-group="monitorear">
                <h2 id="matrixTitle"><i class="fas fa-th"></i> üßÆ Matriz de Correlaci√≥n Cu√°ntica</h2>
                <p style="margin-bottom: 1.5rem; opacity: 0.8;">
                    <i class="fas fa-network-wired"></i> 
                    <strong>Para el operador:</strong> Esta matriz muestra c√≥mo se correlacionan los activos entre s√≠. 
                    <span style="color: #4caf50;">Verde = Correlaci√≥n alta</span> (se mueven juntos), 
                    <span style="color: #ffc107;">Amarillo = Correlaci√≥n media</span>, 
                    <span style="color: #f44336;">Rojo = Correlaci√≥n baja</span> (se mueven independientemente). 
                    √ötil para estrategias de diversificaci√≥n y cobertura.
                </p>
                <div class="matrix-container">
                    <div class="matrix-controls">
                        <button class="btn btn-primary" onclick="refreshMatrix()" type="button">
                            <i class="fas fa-sync-alt"></i> Actualizar Matriz
                        </button>
                        <label style="margin-left:0.8rem;">Intervalo
                            <select id="matrixInterval" name="matrixInterval">
                                <option value="1m">1m</option>
                                <option value="5m">5m</option>
                                <option value="1h" selected>1h</option>
                                <option value="4h">4h</option>
                                <option value="1d">1d</option>
                            </select>
                        </label>
                        <label style="margin-left:0.8rem;">Ventana
                            <select id="matrixLimit" name="matrixLimit">
                                <option value="100">100</option>
                                <option value="150" selected>150</option>
                                <option value="300">300</option>
                                <option value="500">500</option>
                            </select>
                        </label>
                        <label style="margin-left:0.8rem;">Vista
                            <select id="matrixView" name="matrixView" onchange="updateMatrixView()">
                                <option value="heatmap">üî• Mapa de Calor</option>
                                <option value="correlations">üîó Correlaciones</option>
                                <option value="raw">üìä Datos Crudos</option>
                            </select>
                        </label>
                        <label style="margin-left:0.8rem;">Umbral
                            <input id="corrThreshold" type="number" min="0" max="1" step="0.05" value="0.7" style="width:80px;" />
                        </label>
                    </div>
                    <div class="matrix-grid" id="matrixGrid">
                        <!-- Matrix will be populated here -->
                    </div>
                    <div id="matrixRaw" style="display:none; margin-top:1rem; font-size:0.88rem;"></div>
                </div>
            </section>

            <!-- Performance Section -->
            <section class="performance" role="region" aria-labelledby="performanceTitle" data-group="monitorear">
                <h2 id="performanceTitle"><i class="fas fa-tachometer-alt"></i> üìà M√©tricas de Rendimiento</h2>
                <p style="margin-bottom: 1.5rem; opacity: 0.8;">
                    <i class="fas fa-chart-area"></i> 
                    <strong>An√°lisis de performance:</strong> Estas m√©tricas muestran el rendimiento hist√≥rico del sistema. 
                    En modo simulaci√≥n, los valores son estimaciones. Para datos reales, configure las claves API de Binance.
                </p>
                <div class="performance-grid">
                    <div class="performance-card">
                        <h3>üìä Trades Reales</h3>
                        <p class="performance-value" id="totalTrades">--</p>
                        <small>Operaciones ejecutadas</small>
                    </div>
                    <div class="performance-card">
                        <h3>üéØ Tasa de √âxito</h3>
                        <p class="performance-value" id="winRate">--%</p>
                        <small>Porcentaje de aciertos</small>
                    </div>
                    <div class="performance-card">
                        <h3>üí∞ Profit Real</h3>
                        <p class="performance-value" id="totalProfit">--</p>
                        <small>Ganancia real total</small>
                    </div>
                    <div class="performance-card">
                        <h3>üìâ Max Drawdown</h3>
                        <p class="performance-value" id="maxDrawdown">--%</p>
                        <small>P√©rdida m√°xima temporal</small>
                    </div>
                    <div class="performance-card">
                        <h3>üìê Sharpe Ratio</h3>
                        <p class="performance-value" id="sharpeRatio">--</p>
                        <small>Relaci√≥n riesgo/beneficio</small>
                    </div>
                    <div class="performance-card">
                        <h3>‚ö° Eficiencia Cu√°ntica</h3>
                        <p class="performance-value" id="quantumEfficiency">--%</p>
                        <small>Optimizaci√≥n del algoritmo</small>
                    </div>
                </div>
            </section>

            <!-- Admin Control Panel -->
            <section class="admin-panel" data-group="configurar" style="margin-bottom: 2rem;">
                <div class="guide-header">
                    <i class="fas fa-sliders-h"></i>
                    <h2>üõ†Ô∏è Control del Sistema</h2>
                </div>
                <div class="guide-content">
                    <div class="guide-card" style="flex: 1; min-width: 280px;">
                        <h3>‚öôÔ∏è Control B√°sico</h3>
                        <div style="display:flex; gap:0.5rem; align-items:center; flex-wrap: wrap;">
                            <button class="btn" id="runOnceBtn" type="button"><i class="fas fa-play"></i> Ejecutar 1 vez</button>
                            <label for="schedulerInterval">Intervalo (s)
                                <input id="schedulerInterval" name="schedulerInterval" type="number" min="30" value="120" style="width:90px;" />
                            </label>
                            <button class="btn" id="startSchedulerBtn" type="button"><i class="fas fa-clock"></i> Iniciar</button>
                            <button class="btn btn-danger" id="stopSchedulerBtn" type="button"><i class="fas fa-stop"></i> Detener</button>
                        </div>
                                                 <div id="adminActionsStatus" style="margin-top:0.75rem; font-size:0.9rem; opacity:0.9;"></div>
                     </div>
                     
                     <div class="guide-card" style="flex: 1; min-width: 280px;">
                         <h3>üîå Control WebSocket</h3>
                         <div style="display:flex; gap:0.5rem; align-items:center; flex-wrap: wrap;">
                             <button class="btn" id="wsBtnSubscribe" type="button"><i class="fas fa-plug"></i> Conectar</button>
                             <button class="btn" id="wsBtnUnsubscribe" type="button"><i class="fas fa-unlink"></i> Desconectar</button>
                             <button class="btn" id="wsBtnTopN" type="button"><i class="fas fa-list"></i> Top-N</button>
                             <input id="wsSubSymbols" placeholder="S√≠mbolos" style="width:120px;" />
                             <select id="wsSubInterval" style="width:80px;">
                                 <option value="1m">1m</option>
                                 <option value="5m">5m</option>
                                 <option value="1h">1h</option>
                             </select>
                             <label><input type="checkbox" id="wsChOrderbook" /> Orderbook</label>
                             <label><input type="checkbox" id="wsChTicker" /> Ticker</label>
                             <label><input type="checkbox" id="wsChKlines" /> Klines</label>
                             <input id="wsTopN" type="number" placeholder="Top N" style="width:80px;" />
                             <label><input type="checkbox" id="wsAuto" /> Auto</label>
                             <input id="wsAutoEvery" type="number" placeholder="Cada (s)" style="width:80px;" />
                             <input id="wsMaxSpreadBps" type="number" placeholder="Max Spread" style="width:100px;" />
                             <input id="wsMinCoherence" type="number" placeholder="Min Coherence" style="width:100px;" />
                             <input id="wsMinVolume" type="number" placeholder="Min Volume" style="width:100px;" />
                         </div>
                     </div>
                     
                     <div class="guide-card" style="flex: 1; min-width: 280px;">
                         <h3>üìä Herramientas de Correlaci√≥n</h3>
                         <div style="display:flex; gap:0.5rem; align-items:center; flex-wrap: wrap;">
                             <button class="btn" id="exportPairsBtn" type="button"><i class="fas fa-download"></i> Exportar Pares</button>
                             <button class="btn" id="quickHedgePairsBtn" type="button"><i class="fas fa-shield"></i> Hedge R√°pido</button>
                         </div>
                     </div>

                                         <div class="guide-card expert-only" style="flex: 2; min-width: 320px; display:none;">
                         <h3>üîó Configuraci√≥n Avanzada</h3>
                         <div id="cacheMetrics" style="margin-bottom: 1rem; font-size: 0.9rem; opacity: 0.8;">
                             <!-- Cache metrics will be populated here -->
                         </div>
                        <div style="display:flex; gap:0.75rem; align-items:center; flex-wrap:wrap; margin-bottom:0.5rem;">
                            <label for="cfgTradeMode"><strong>Modo</strong></label>
                            <select id="cfgTradeMode" name="cfgTradeMode" title="Modo de trading">
                                <option value="options">options</option>
                                <option value="futures">futures</option>
                            </select>
                            <button class="btn" id="ensembleRefreshBtn" type="button"><i class="fas fa-sync-alt"></i> Refrescar</button>
                        </div>
                        <div style="display:grid; grid-template-columns: repeat(2, minmax(200px, 1fr)); gap:10px;">
                            <div>
                                <h4 style="margin:0 0 6px 0;">Pesos</h4>
                                <label>Core <input id="cfgCoreWeight" type="number" step="0.01" min="0" max="1" value="0.5" style="width:100px;" /></label>
                                <label>AI <input id="cfgAiWeight" type="number" step="0.01" min="0" max="1" value="0.5" style="width:100px; margin-left:8px;" /></label>
                            </div>
                            <div>
                                <h4 style="margin:0 0 6px 0;">Costes</h4>
                                <label>Taker <input id="cfgTakerFee" type="number" step="0.0001" min="0" max="0.1" value="0.0005" style="width:100px;" /></label>
                                <label>Maker <input id="cfgMakerFee" type="number" step="0.0001" min="0" max="0.1" value="0.0002" style="width:100px; margin-left:8px;" /></label>
                            </div>
                        </div>
                                                 <div style="margin-top:10px; display:flex; gap:8px; flex-wrap:wrap;">
                             <button class="btn btn-primary" id="ensembleSaveBtn" type="button"><i class="fas fa-save"></i> Guardar Config</button>
                             <button class="btn btn-danger" id="killSwitchBtn" type="button"><i class="fas fa-stop-circle"></i> Kill Switch</button>
                             <span id="ensembleStatusText" style="font-size:0.9rem; opacity:0.9;"></span>
                         </div>
                    </div>
                </div>
            </section>

            <!-- Operator Instructions -->
            <section class="operator-guide" style="margin-top: 2rem;">
                <div class="guide-header">
                    <i class="fas fa-book-open"></i>
                    <h2>üìö Gu√≠a del Operador</h2>
                </div>
                <div class="guide-content">
                    <div class="guide-card">
                        <h3>üéØ ¬øQu√© es este sistema?</h3>
                        <p>Este es un sistema de trading cu√°ntico avanzado que utiliza algoritmos de inteligencia artificial para analizar el mercado de criptomonedas en tiempo real. El sistema procesa datos de Binance y genera se√±ales de trading basadas en an√°lisis cu√°ntico.</p>
                    </div>
                    <div class="guide-card">
                        <h3>üìä C√≥mo interpretar las m√©tricas</h3>
                        <p><strong>Puntuaci√≥n Cu√°ntica:</strong> Valor entre 0-1 que indica la fuerza del an√°lisis. <strong>Se√±ales Activas:</strong> N√∫mero de oportunidades detectadas. <strong>Coherencia Cu√°ntica:</strong> Estabilidad del sistema (ideal >60%).</p>
                    </div>
                    <div class="guide-card">
                        <h3>‚ö° Se√±ales de Trading</h3>
                        <p><strong>NEUTRAL:</strong> Estrategias de opciones (straddle/strangle). <strong>BUY/SELL:</strong> Direcciones claras con alta confianza. <strong>Confianza:</strong> Porcentaje de certeza del algoritmo (>70% = alta confianza).</p>
                    </div>
                    <div class="guide-card">
                        <h3>‚ö†Ô∏è Gesti√≥n de Riesgos</h3>
                        <p>‚Ä¢ Nunca opere con m√°s del 2% del capital por se√±al<br>
                        ‚Ä¢ Use stop-loss autom√°ticos<br>
                        ‚Ä¢ Diversifique entre m√∫ltiples activos<br>
                        ‚Ä¢ Monitoree la coherencia cu√°ntica constantemente</p>
                    </div>
                    <div class="guide-card">
                        <h3>üîß Configuraci√≥n para Trading Real</h3>
                        <p>1. Edite el archivo <code>.env</code> con sus claves API de Binance<br>
                        2. Configure <code>BINANCE_TESTNET=false</code> para modo producci√≥n<br>
                        3. Reinicie el sistema con <code>node frontend-api.js</code></p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <p>&copy; 2024 Quantum Trading System. Sistema operativo para trading cu√°ntico avanzado.</p>
                <div class="footer-links">
                    <a href="#" onclick="showAbout()">üìñ Acerca de</a>
                    <a href="#" onclick="showDocumentation()">üìö Documentaci√≥n</a>
                    <a href="#" onclick="showSettings()">‚öôÔ∏è Configuraci√≥n</a>
                </div>
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="systemStatus.js"></script>
    <script src="initializeCache.js"></script>
    <script src="updateQuantumMetrics.js"></script>
    <script src="updateCoreStatus.js"></script>
    <script src="ml-dashboard.js" defer></script>
    <script src="script.js"></script>
    <script src="/test-frontend-errors.js"></script>
</body>
</html>