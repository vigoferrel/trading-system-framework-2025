
// Constantes fÃ­sicas reales del sistema
const PHYSICAL_CONSTANTS = {
  "QUANTUM_COHERENCE": 0.75,
  "QUANTUM_CONSCIOUSNESS": 0.8,
  "QUANTUM_ENTANGLEMENT": 0.65,
  "QUANTUM_SUPERPOSITION": 0.7,
  "QUANTUM_TUNNELING": 0.6,
  "MARKET_VOLATILITY": 0.05,
  "MARKET_MOMENTUM": 0.1,
  "MARKET_LIQUIDITY": 0.75,
  "MARKET_SPREAD": 0.001,
  "MARKET_DEPTH": 500000,
  "FUNDING_RATE": 0.02,
  "FUNDING_VOLATILITY": 0.01,
  "FUNDING_DEVIATION": 0.5,
  "FUNDING_ANNUALIZED": 5,
  "LIQUIDATION_PROBABILITY": 0.05,
  "SLIPPAGE_RATE": 0.0025,
  "VOLATILITY_RISK": 0.1,
  "EXECUTION_RISK": 0.005,
  "VOLUME_24H": 500000,
  "VOLUME_RATIO": 0.75,
  "VOLUME_EXPANSION": 300000,
  "PRICE_CHANGE": 0.02,
  "PRICE_ACCELERATION": 0.015,
  "PRICE_MOMENTUM": 0.01,
  "TIME_TO_FUNDING": 1800000,
  "SESSION_INTENSITY": 0.6,
  "TEMPORAL_RESONANCE": 0.7,
  "FIBONACCI_STRENGTH": 0.75,
  "FIBONACCI_INDEX": 5,
  "NEURAL_CONFIDENCE": 0.85,
  "NEURAL_COHERENCE": 0.8,
  "NEURAL_ENTANGLEMENT": 0.7,
  "BASE_LEVERAGE": 15,
  "CONSERVATIVE_LEVERAGE": 10,
  "AGGRESSIVE_LEVERAGE": 25,
  "STOP_LOSS": 0.03,
  "TAKE_PROFIT": 0.06,
  "BASE_SCORE": 0.65,
  "CONFIDENCE_SCORE": 0.75,
  "QUALITY_SCORE": 0.8
};

/**
 * Test Real Data System - VerificaciÃ³n Completa con Datos Reales
 */

const BASE_URL = 'http://localhost:4603';

async function testEndpoint(endpoint, description) {
    try {
        const response = await fetch(`${BASE_URL}${endpoint}`);
        const data = await response.json();
        
        if (response.ok) {
            console.log(`[OK] ${description}: OK`);
            
            // Verificar si hay datos reales
            if (data.success && data.data) {
                const symbols = Object.keys(data.data);
                if (symbols.length > 0) {
                    const firstSymbol = symbols[0];
                    const firstData = data.data[firstSymbol];
                    if (firstData && firstData.price) {
                        console.log(`   [DATA] Datos reales detectados: ${symbols.length} sÃ­mbolos`);
                        console.log(`   [MONEY] ${firstSymbol}: $${firstData.price.toFixed(2)} (${firstData.change24h?.toFixed(2)}%)`);
                    }
                }
            }
            return true;
        } else {
            console.log(`[ERROR] ${description}: Error ${response.status}`);
            return false;
        }
    } catch (error) {
        console.log(`[ERROR] ${description}: ${error.message}`);
        return false;
    }
}

async function testRealDataSystem() {
    console.log('[NIGHT] Iniciando pruebas del Sistema con Datos Reales...\n');
    
    const endpoints = [
        { path: '/api/status', desc: 'Status del Sistema' },
        { path: '/api/market-data', desc: 'Datos de Mercado Reales' },
        { path: '/api/quantum-factors?symbol=BTCUSDT', desc: 'Factores CuÃ¡nticos Reales' },
        { path: '/api/quantum-state', desc: 'Estado CuÃ¡ntico Real' },
        { path: '/api/quantum-matrix', desc: 'Matriz CuÃ¡ntica Real' },
        { path: '/api/performance', desc: 'MÃ©tricas de Rendimiento Reales' },
        { path: '/api/alerts', desc: 'Alertas del Sistema' },
        { path: '/api/admin/overview', desc: 'Vista General Admin' }
    ];
    
    let successCount = 0;
    let totalCount = endpoints.length;
    
    for (const endpoint of endpoints) {
        const success = await testEndpoint(endpoint.path, endpoint.desc);
        if (success) successCount++;
        await new Promise(resolve => setTimeout(resolve, 200)); // Pausa entre requests
    }
    
    console.log(`\n[DATA] Resultados de las Pruebas:`);
    console.log(`[OK] Exitosos: ${successCount}/${totalCount}`);
    console.log(`[ERROR] Fallidos: ${totalCount - successCount}/${totalCount}`);
    console.log(`[UP] Tasa de Ã©xito: ${((successCount/totalCount)*100).toFixed(1)}%`);
    
    if (successCount === totalCount) {
        console.log('\nðŸŽ‰ Â¡SISTEMA CON DATOS REALES FUNCIONANDO PERFECTAMENTE!');
        console.log('[NIGHT] Sistema CuÃ¡ntico con Datos Reales de Binance - OPERATIVO');
        console.log('[DATA] Datos reales del mercado obtenidos correctamente');
        console.log('ðŸ”— Frontend: http://localhost:4603');
        console.log('[API] Core System: http://localhost:4601');
    } else {
        console.log('\n[WARNING] Algunos endpoints tienen problemas');
    }
}

// Ejecutar pruebas
testRealDataSystem().catch(console.error);
